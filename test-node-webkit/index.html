<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>hello world</title>
  <link rel="stylesheet" href="style.css">
</head>
<body onload="/*process.mainModule.exports.callback();*/">
  <div class="toolbar" id="toolbar"></div>
  <ul class="system_mutual">
    <li class="minimum" id="minimum">-</li>
    <li class="maximum" id='maximum'>口</li>
    <li id="close" class="close"></li>
  </ul>
  <div class="wraper">
    <h1>Hello World!</h1>
  </div>
  <script>
var oMenu = {
  "getOne":function(p,str){
    return p.querySelector(str);
  },
  "getAll":function(p,str){
    return p.querySelectorAll(str);
  },
  "minFn":function(){
    win.hide();
    var tray = new gui.Tray({title:"tray",icon:"logo.png"});
    tray.tooltip = "打开软件";
    tray.on("click",function(){
      this.remove();
      tray = null;
      win.show();
      isShowWindow = true;
    });
  }
}

//获取当前窗口
var gui = require("nw.gui"),
  win = gui.Window.get();

var oMinimum = oMenu.getOne(document,".minimum"),
  oMaximum = oMenu.getOne(document,".maximum"),
  oClose = oMenu.getOne(document,".close");
oMinimum.addEventListener("click",function(){
  win.minimize();
});
win.on("minimize",oMenu.minFn);
  </script>
</body>
</html>